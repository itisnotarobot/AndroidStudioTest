<p style="margin:0;"><b># 实验3_Android界面组件实验</b></p><p style="margin:0;"><br /></p><p style="margin:0;"><b>## Android ListView的用法</b></p><p style="margin:0;"><br /></p><p style="margin:0;">- 思路</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; 1. 先在activity_main.xml里定义一个`ListView`组件，再创建一个simple_item.xml的布局文件用来定义ListView中每一个条目的内容</p><p style="margin:0;">&nbsp; 2. 在Activity.java里面定义一个简单适配器`SimpleAdapter`，借此将数据和布局文件进行绑定和输出</p><p style="margin:0;">&nbsp; 3. 最后在Activity.java里面定义一个监听器，当点击某一条目时，将那一条的背景色设为红色</p><p style="margin:0;"><br /></p><div style="margin:0;">- 关键代码：</div><div style="margin:0;"><br /></div><p style="margin:0;">&nbsp; &nbsp; - activity_main.xml</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#e8bf6a;">&lt;LinearLayout </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">android</span><span style="color:#6a8759;">="http://schemas.android.com/apk/res/android"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="match_parent"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="match_parent"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:background</span><span style="color:#6a8759;">="@color/eWhite"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation</span><span style="color:#6a8759;">="vertical"</span><span style="color:#e8ba36;">&gt;<br /></span><span style="color:#e8ba36;"><br /></span><span style="color:#e8ba36;"><br /></span><span style="color:#e8ba36;"><br /></span><span style="color:#54a857;">&lt;ListView</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/list_view"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="match_parent"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="wrap_content"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:divider</span><span style="color:#6a8759;">="@color/black"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:dividerHeight</span><span style="color:#6a8759;">="2dp" </span><span style="color:#54a857;">/&gt;</span><span style="color:#54a857;"><br /></span>...........</pre><p style="margin:0;">&nbsp; &nbsp; - simple_item.xml</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#e8bf6a;">&lt;LinearLayout </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">android</span><span style="color:#6a8759;">="http://schemas.android.com/apk/res/android"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/list_items"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="match_parent"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="wrap_content"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:orientation</span><span style="color:#6a8759;">="horizontal"</span><span style="color:#6a8759;"><br /></span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:background</span><span style="color:#6a8759;">="@color/white"</span><span style="color:#e8ba36;">&gt;</span><span style="color:#e8ba36;"><br /></span><span style="color:#e8ba36;"><br /></span><span style="color:#54a857;">&lt;TextView</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/name"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="wrap_content"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="wrap_content"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_gravity</span><span style="color:#6a8759;">="center_vertical"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:paddingLeft</span><span style="color:#6a8759;">="10dp"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:textSize</span><span style="color:#6a8759;">="20dp" </span><span style="color:#54a857;">/&gt;</span><span style="color:#54a857;"><br /></span>...........</pre><p style="margin:0;">&nbsp; &nbsp; - Activity.java</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;">SimpleAdapter simpleAdapter = new SimpleAdapter(<span style="color:#cc7832;">this, </span>list<span style="color:#cc7832;">, </span>R.layout.simple_item<span style="color:#cc7832;">, </span>new String[]{<span style="color:#6a8759;">"names"</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"pic"</span>}<span style="color:#cc7832;">, </span>new int[]{R.id.name<span style="color:#cc7832;">, </span>R.id.pic})<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>ListView listView = findViewById(R.id.list_view)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>listView.setAdapter(simpleAdapter)<span style="color:#cc7832;">;<br /></span><span style="color:#cc7832;"><br /></span>listView.setOnItemClickListener((parent<span style="color:#cc7832;">, </span>view<span style="color:#cc7832;">, </span>position<span style="color:#cc7832;">, </span>id) -&gt; {<br />    System.out.println(view)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>view.setBackgroundColor(Color.RED)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>Toast.makeText(MainActivity.<span style="color:#cc7832;">this, </span>names[position]<span style="color:#cc7832;">, </span>Toast.LENGTH_SHORT).show()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><div>})<span style="color:#cc7832;">;</span></div><div><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></div></pre><p style="margin:0;">- 效果截图</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/img.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;"><b>## 创建自定义布局的AlertDialog</b></p><p style="margin:0;"><br /></p><p style="margin:0;">- 思路</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; 1. 在上题的activity_main.xml中放一个Button，定义一个监听器，单击Button后执行定义好的`showXml()`方法</p><p style="margin:0;">&nbsp; 2. 在showXml()中调用AlertDialog.Builder对象上的setView()将布局添加到 AlertDialog。</p><p style="margin:0;"><br /></p><p style="margin:0;">- 关键代码</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;">Button button = findViewById(R.id.button)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>button.setOnClickListener(new View.OnClickListener() {<br />    @Override<br />    public void onClick(View v) <span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span>showXml()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span><span style="font-weight:bold;"><br /></span>})<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></pre><p style="margin:0;"><br /></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">private </span>void showXml() {<br />    View view = LayoutInflater.from(<span style="color:#cc7832;">this</span>).inflate(R.layout.alert_dialog<span style="color:#cc7832;">, null</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>AlertDialog alertDialog = new AlertDialog.Builder(<span style="color:#cc7832;">this</span>)<br />        .setView(view)<br />        .create()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>alertDialog.show()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>}<br /><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></pre><p style="margin:0;">- 效果截图</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp;&nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/img2.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;"><b>## 使用XML定义菜单</b></p><p style="margin:0;"><br /></p><p style="margin:0;">- 思路</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; 1. 在res下创建了一个menu包，在这个包下创建了一个item_menu.xml，在此定义menu样式</p><p style="margin:0;">&nbsp; 2. 在MainActivity.java重写onCreateOptionsMenu(Menu menu) 方法和onOptionsItemSelected(@NonNull MenuItem item)方法</p><p style="margin:0;">&nbsp; 3. 在onOptionsItemSelected(@NonNull MenuItem item)方法中调用swich函数，设置点击不同的item时的效果</p><p style="margin:0;"><br /></p><p style="margin:0;">- 关键代码</p><p style="margin:0;"><br /></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;">    <span style="color:#e8ba36;">&lt;?</span><span style="color:#bababa;">xml version</span><span style="color:#6a8759;">="1.0" </span><span style="color:#bababa;">encoding</span><span style="color:#6a8759;">="utf-8"</span><span style="color:#e8ba36;">?&gt;</span><span style="color:#e8ba36;"><br /></span><span style="color:#e8bf6a;">&lt;menu </span><span style="color:#bababa;">xmlns:</span><span style="color:#9876aa;">android</span><span style="color:#6a8759;">="http://schemas.android.com/apk/res/android"</span><span style="color:#e8ba36;">&gt;</span><span style="color:#e8ba36;"><br /></span><span style="color:#54a857;">&lt;item</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/font_size"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:title</span><span style="color:#6a8759;">="</span><span style="color:#6a8759;font-family:'宋体',monospace;">字体大小</span><span style="color:#6a8759;">"</span><span style="color:#54a857;">&gt;</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">    </span><span style="color:#359ff4;">&lt;menu&gt;</span><span style="color:#359ff4;"><br /></span><span style="color:#359ff4;">        </span><span style="color:#5060bb;">&lt;item</span><span style="color:#5060bb;"><br /></span><span style="color:#5060bb;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/small"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:title</span><span style="color:#6a8759;">="</span><span style="color:#6a8759;font-family:'宋体',monospace;">小</span><span style="color:#6a8759;">" </span><span style="color:#5060bb;">/&gt;</span><span style="color:#5060bb;"><br /></span><span style="color:#5060bb;">        &lt;item</span><span style="color:#5060bb;"><br /></span><span style="color:#5060bb;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/normal_size"</span><span style="color:#6a8759;"><br /></span><span style="color:#6a8759;">            </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:title</span><span style="color:#6a8759;">="</span><span style="color:#6a8759;font-family:'宋体',monospace;">中</span><span style="color:#6a8759;">" </span><span style="color:#5060bb;">/&gt;</span><span style="color:#5060bb;"><br /></span><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></pre><p style="margin:0;"><br /></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#bbb529;">@Override</span><span style="color:#bbb529;"><br /></span><span style="color:#cc7832;">public </span>boolean onCreateOptionsMenu(Menu menu) {<br />    <span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">从</span><span style="color:#808080;">item_menu.xml</span><span style="color:#808080;font-family:'宋体',monospace;">中构建菜单页面布局</span><span style="color:#808080;font-family:'宋体',monospace;"><br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span>getMenuInflater().inflate(R.menu.item_menu<span style="color:#cc7832;">, </span>menu)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    return true;</span><span style="color:#cc7832;"><br /></span>}<br /><br /><span style="color:#bbb529;">@Override</span><span style="color:#bbb529;"><br /></span><span style="color:#cc7832;">public </span>boolean onOptionsItemSelected(@NonNull MenuItem item) {<br />    TextView test = findViewById(R.id.test)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>int v = item.getItemId()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>switch (v)<span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span>case R.id.normal_menu:<br />        Toast.makeText(<span style="color:#cc7832;">this, </span><span style="color:#6a8759;">"</span><span style="color:#6a8759;font-family:'宋体',monospace;">点击了菜单</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span>Toast.LENGTH_SHORT).show()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.color_red:<br />        test.setTextColor(Color.RED)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.color_black:<br />        test.setTextColor(Color.BLACK)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.small:<br />        test.setTextSize(<span style="color:#6897bb;">10</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.normal_size:<br />        test.setTextSize(<span style="color:#6897bb;">16</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.big:<br />        test.setTextSize(<span style="color:#6897bb;">20</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>default:<br />        <span style="color:#cc7832;">break;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">    </span><span style="color:#cc7832;">return super</span>.onOptionsItemSelected(item)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><div>}</div><div><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></div></pre><p style="margin:0;"><br /></p><p style="margin:0;">- 效果截图：</p><p style="margin:0;"><br /></p><div style="margin:0;">&nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/img3.png" /></div><div style="margin:0;"><img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/img4.png" /></div><div style="margin:0;"><img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/img5.png" /></div><p style="margin:0;"><br /></p><p style="margin:0;"><br /></p><p style="margin:0;"><b>## 创建上下文操作模式(ActionMode)的上下文菜单</b></p><p style="margin:0;"><br /></p><p style="margin:0;">- 思路：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 先写了一个标题栏的menu，放入了一个打勾(selected)和垃圾桶(delete)的图片</p><p style="margin:0;">&nbsp; - 将listView设置为多选模式</p><p style="margin:0;">&nbsp; - 设num为0，当进入actionmode时会在title上显示num的值</p><p style="margin:0;">&nbsp; - 实现setMultiChoiceModeListener方法，长按listView某item时会响应，重写里面的方法，创建时将menu加载进来，当item的状态改变时，判断是被选中还是取消选中，选中则设为蓝色，取消则变会白色，并且改变num值</p><p style="margin:0;">&nbsp; - 当点击打勾(selected)时，调用selectedAll()方法，将所有item选中，num设为listView长度，当点击垃圾桶(delete)时，调用deleteAll方法，num=0，取消所有选中</p><p style="margin:0;"><br /></p><p style="margin:0;">- 关键代码：</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;">listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>listView.setMultiChoiceModeListener(new AbsListView.MultiChoiceModeListener() {<br />    int num = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>int blue = Color.parseColor<span style="color:#e8ba36;">(</span><span style="color:#6a8759;">"#00BFFF"</span><span style="color:#e8ba36;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span>@Override<br />    public void onItemCheckedStateChanged<span style="color:#e8ba36;">(</span>ActionMode mode<span style="color:#cc7832;">, </span>int position<span style="color:#cc7832;">,</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>long id<span style="color:#cc7832;">, </span>boolean checked) <span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span><span style="color:#808080;">// Here you can do something when items are selected/de-selected,</span><span style="color:#808080;"><br /></span><span style="color:#808080;">        // such as update the title in the CAB</span><span style="color:#808080;"><br /></span><span style="color:#808080;">        </span><span style="color:#cc7832;">if </span><span style="color:#e8ba36;">(</span>checked == <span style="color:#cc7832;">true</span><span style="color:#e8ba36;">) </span><span style="color:#54a857;">{</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">            </span>listView.getChildAt<span style="color:#54a857;">(</span>position<span style="color:#54a857;">)</span>.setBackgroundColor<span style="color:#54a857;">(</span>blue<span style="color:#54a857;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">            </span>num++<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span><span style="color:#54a857;">} </span><span style="color:#cc7832;">else </span><span style="color:#54a857;">{</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">            </span>listView.getChildAt<span style="color:#54a857;">(</span>position<span style="color:#54a857;">)</span>.setBackgroundColor<span style="color:#54a857;">(</span>Color.WHITE<span style="color:#54a857;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">            </span>num--<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span><span style="color:#54a857;">}</span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">        </span>mode.setTitle<span style="color:#e8ba36;">(</span>num + <span style="color:#6a8759;">" selected"</span><span style="color:#e8ba36;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><div><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span></div><div><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></div></pre><p style="margin:0;">&nbsp; &nbsp;&nbsp;</p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">public </span>void deleteAll() {<br />    <span style="color:#cc7832;">for </span>(int i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; listView.getCount()<span style="color:#cc7832;">; </span>i++) <span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span>listView.getChildAt<span style="color:#e8ba36;">(</span>i<span style="color:#e8ba36;">)</span>.setBackgroundColor<span style="color:#e8ba36;">(</span>Color.WHITE<span style="color:#e8ba36;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">    </span>num = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#e8ba36;">}</span><span style="color:#e8ba36;"><br /></span><span style="color:#cc7832;">public </span>void selectAll() {<br />    <span style="color:#cc7832;">for </span>(int i = <span style="color:#6897bb;">0</span><span style="color:#cc7832;">; </span>i &lt; listView.getCount<span style="color:#e8ba36;">()</span><span style="color:#cc7832;">; </span>i++) <span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span>listView.getChildAt<span style="color:#e8ba36;">(</span>i<span style="color:#e8ba36;">)</span>.setBackgroundColor<span style="color:#e8ba36;">(</span>blue<span style="color:#e8ba36;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>listView.setItemChecked<span style="color:#e8ba36;">(</span>i<span style="color:#cc7832;">,true</span><span style="color:#e8ba36;">)</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">    </span>num = listView.getCount<span style="color:#e8ba36;">()</span><span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span>}<br /><span style="color:#bbb529;">@Override</span><span style="color:#bbb529;"><br /></span><span style="color:#cc7832;">public </span>boolean onActionItemClicked(ActionMode mode<span style="color:#cc7832;">, </span>MenuItem item) {<br />    <span style="color:#808080;">// Respond to clicks on the actions in the CAB</span><span style="color:#808080;"><br /></span><span style="color:#808080;">    </span>switch (item.getItemId()) <span style="font-weight:bold;">{</span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span>case R.id.delete:<br />        deleteAll()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>mode.finish()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>case R.id.selected:<br />        selectAll()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>num = listView.getCount()<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>mode.setTitle(num + <span style="color:#6a8759;">" selected"</span>)<span style="color:#cc7832;">;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        return true;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">        </span>default:<br />        <span style="color:#cc7832;">return false;</span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="font-weight:bold;">}</span><span style="font-weight:bold;"><br /></span>}<br /><pre style="font-family: &quot;JetBrains Mono&quot;, monospace; font-size: 9.8pt;">...........</pre></pre><p style="margin:0;">- 效果截图：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 长按item后：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/mode1.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 多选效果：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/mode2.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 再次点击选中项：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/mode3.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 点击打勾（全选）：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;&nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/mode4.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; - 点击垃圾桶（取消选中并退出）：</p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;&nbsp;<img src="https://github.com/itisnotarobot/AndroidStudioTest/blob/main/%E5%AE%9E%E9%AA%8C3/pic/mode5.png" /></p><p style="margin:0;"><br /></p><p style="margin:0;">&nbsp; &nbsp;&nbsp;</p>